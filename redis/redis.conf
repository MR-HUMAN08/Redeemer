# Redis Configuration for Redeemer Lab
# WARNING: This configuration is INTENTIONALLY INSECURE for training purposes
# DO NOT use this configuration in production environments

# Network Configuration
# Bind to all interfaces (allows connections from any IP)
bind 0.0.0.0

# Protected mode disabled (allows external connections without auth)
protected-mode no

# Port Configuration
port 6379

# TCP listen() backlog
tcp-backlog 511

# Connection timeout (0 = disabled)
timeout 0

# TCP keepalive
tcp-keepalive 300

################################# SECURITY ###################################

# INTENTIONAL VULNERABILITY: No authentication required
# In production, you should ALWAYS set: requirepass <strong-password>
# For this lab, we explicitly DO NOT set requirepass

# Disable dangerous commands (optional, but we keep them for enumeration practice)
# rename-command CONFIG ""
# rename-command FLUSHDB ""
# rename-command FLUSHALL ""

# Allow all commands (vulnerable configuration)
# Students should discover this during enumeration

################################# GENERAL #####################################

# By default Redis does not run as a daemon
daemonize no

# Redis PID file (not used in container mode)
pidfile /var/run/redis_6379.pid

# Logging
loglevel notice
logfile ""

# Number of databases
databases 16

################################ SNAPSHOTTING  ################################

# Save the DB to disk (default snapshot settings)
save 900 1
save 300 10
save 60 10000

# Stop accepting writes if background save fails
stop-writes-on-bgsave-error yes

# Compress string objects using LZF
rdbcompression yes

# RDB file checksum
rdbchecksum yes

# The filename where to dump the DB
dbfilename dump.rdb

# The working directory
dir /data

################################# REPLICATION #################################

# Replication settings (not used in this simple lab)
# replica-serve-stale-data yes
# replica-read-only yes

################################## LIMITS #####################################

# Max number of connected clients
maxclients 10000

# Don't use more than the specified amount of memory (optional)
# maxmemory <bytes>

# Memory eviction policy (not critical for this lab)
# maxmemory-policy noeviction

############################# LAZY FREEING ####################################

lazyfree-lazy-eviction no
lazyfree-lazy-expire no
lazyfree-lazy-server-del no
replica-lazy-flush no

################################ THREADED I/O #################################

# Redis can use threads for some operations
# io-threads 4
# io-threads-do-reads no

############################ KERNEL OOM CONTROL ##############################

oom-score-adj no

#################### KERNEL transparent hugepage CONTROL ######################

disable-thp yes

############################## APPEND ONLY MODE ###############################

# AOF (Append Only File) - disabled for simplicity
appendonly no

# appendfilename "appendonly.aof"
# appendfsync everysec
